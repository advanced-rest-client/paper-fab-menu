<dom-module id="paper-fab-menu-item">
    <template>
        <style is="custom-style">
          :host {
            @apply(--layout-flex);
            margin: 7px;
          }
          .menu-item {
            position: relative;
            transition: 100ms all;
            transform: scale(0);
          }
          :host(.opened) .menu-item {
            /*transform: scale(1);*/
            display: block;
            animation: 300ms scale 300ms 1 forwards alternate cubic-bezier(0.165, 0.84, 0.44, 1);
          }

          @keyframes scale {
            0% {
              transform: scale(0);
            }
            100% {
              transform: scale(1);
            }
          }
        </style>
        <div class="menu-item" id="menuItem">
          <paper-fab id="paperFab" mini icon="{{icon}}" label="{{label}}"></paper-fab>
          <paper-tooltip offset="10" margin-top="0" position="{{tooltipPosition}}">{{tooltip}}</paper-tooltip>
        </div>
    </template>
    <script>
        Polymer({
            is: 'paper-fab-menu-item',
            properties: {
              // Color of the menu item.
              color: String,
              // The position of rhe tooltop. See paper-tooltip for the api.
              tooltipPosition: {
                type: String,
                value: 'left'
              },
              // Tooltip display text
              tooltip: String,
              // The delay (in ms) before the entry / exit animation begins.
              transitionDelay: Number,
              // Label only used with paper-fab when the icon is not present.
              label: String
            },

            observers: [
              '_updateTransitionDelay(transitionDelay)',
              '_colorChanged(color)'
            ],

            _updateTransitionDelay: function(transitionDelay) {
              this.$.menuItem.style.transitionDelay = transitionDelay + 'ms';
              this.$.menuItem.style.animationDelay = transitionDelay + 'ms';
            },

            // Called when color has changed.
            _colorChanged: function(color) {
              this.customStyle['--paper-fab-background'] = color;
              this.updateStyles();
              // For some reason code above do not affect main fab at bootstrap time.
              this.$.paperFab.style.backgroundColor = color;
            },
        });
    </script>
</dom-module>
